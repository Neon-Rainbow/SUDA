define("sjs/base/corespe",["sjs/util/urlspe","sjs/flash/swfobject"],function(url,swfobject){return{each:function(obj,iterator,context){if(obj==null)return;if(obj.length===+obj.length){for(var i=0,l=obj.length;i<l;i++){iterator.call(context,i,obj[i],obj)}}else{for(var key in obj){if(_.has(obj,key)){iterator.call(context,key,obj[key],obj)}}}},extend:function(obj){this.each(Array.prototype.slice.call(arguments,1),function(index,source){if(source){for(var prop in source){obj[prop]=source[prop]}}});return obj},get_el:function(id){return document.getElementById(id)},jsonpspe:function(obj){var callback="sjs_"+(Math.random()+'').substr(2,16),script=document.createElement('script'),head=document.getElementsByTagName('head')[0];script.charset='utf-8';script.unload=function(){script.onload=script.onreadystatechange=null;head.removeChild(script)};script.onload=script.onreadystatechange=function(){if(!script.readyState||/loaded|complete/.test(script.readyState)){script.unload();script=undefined}};var success=obj.success||(function(){}),error=obj.error||(function(){}),complete=function(data,fun,obj){fun(data);window.clearTimeout(obj.timepoint);obj.complete&&obj.complete(data)};window[callback]=function(data){complete(data,success,obj)};if(obj.timeout){obj.timepoint=window.setTimeout(function(){complete({'code':'timeout'},error,obj)},5000)}script.src=obj.url+(obj.url.indexOf('?')>=0?"&":"?")+(obj.jsonp||"callback")+"="+callback+'&'+url.param(obj.data);head.appendChild(script)},using:function(obj,namespace,def_val){if(typeof(obj)==="string"){def_val=namespace;namespace=obj;obj=window}var nps=namespace.split(".");this.each(nps,function(i){obj[nps[i]]=obj[nps[i]]||((i===(nps.length-1))?(def_val||{}):{});obj=obj[nps[i]]});return obj},tmpl:function(_html,obj){var arr=_html.match(/{{\w+}}/g);for(var i=0,j=arr.length;i<j;i++){var pro=arr[i].replace("{{","").replace("}}","");_html=_html.replace(eval("/"+arr[i]+"/g"),obj[pro]||0)}return _html},sflash:function(){var pv=swfobject.getFlashPlayerVersion();return(pv.major+pv.minor+pv.release)?'1':'0'},bind:function(obj,type,fn){if(obj.addEventListener){obj.addEventListener(type,fn,false)}else if(obj.attachEvent){obj.attachEvent("on"+type,fn)}else{this.using(obj,"events."+type,[]).push(fn)}},unbind:function(obj,type,fn){if(obj.removeEventListener){obj.removeEventListener(type,fn,false)}else if(obj.detachEvent){obj.detachEvent("on"+type,fn)}else{this.using(obj,"events")[type]=undefined}},fire:function(obj,type,args){var events=this.using(obj,"events");if(events[type]){this.each(events[type],function(i){if(typeof(this)==="function"){this.call(obj,args)}})}},is_array:function(obj){return Object.prototype.toString.call(obj)==="[object Array]"},is_object:function(obj){return Object.prototype.toString.call(obj)==="[object Object]"},get_Pos:function(ev){if(ev.pageX||ev.pageY){return{x:ev.pageX,y:ev.pageY}}return{x:ev.clientX+document.body.scrollLeft-document.body.clientLeft,y:ev.clientY+document.body.scrollTop-document.body.clientTop}},domready:function(fun){if(/loaded|complete/.test(document.readyState)){fun()}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);fun()},false)}else if(document.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);fun()}})}}}});