define("sjs/matrix/ad/statspe",["sjs/matrix/ad/config"],function(config){var CONFIG=config._db;var stat={get:function(pro,obj){if(!pro)return;var urls=typeof(pro)==="string"?CONFIG["URL_"+pro.toUpperCase()+"_STAT"]||pro.split("|"):pro,args=obj?this.param(this.build(obj)):"";if(!(args.match(/[a-z]*\_[0-9]*\_[0-9]*/g)==void 0)){var combine_id=args.match(/[a-z]*\_[0-9]*\_[0-9]*/g)[0],standard_id=args.match(/[a-z]{5}\_[0-9]*/g)[0];args=args.replace(combine_id,standard_id)}for(var i=0;i<urls.length;i++){var rnd='='+Math.random(),img=window['_IMG'+rnd]=new Image();img.onload=img.onerror=function(){img=null;window['_IMG'+rnd]=null};img.src=urls[i]+args+"&timestamp="+new Date().getTime();setTimeout(function(){},1000)}},build:function(_obj){var self=this,G=function(pro){return(typeof(_obj[pro])!=="undefined")?_obj[pro]:""};return{aid:G("adid"),apid:G("cont_id"),impid:G("impression_id"),at:G("adtype"),mkey:G("monitorkey"),latcy:G("latency"),freq:G("freq"),turn:G("turn"),ax:G("x"),ay:G("y"),cx:G("cx"),cy:G("cy"),ed:G("ed"),bucket:G("bucket"),ext:G("ext"),uloc:G("uloc"),supplyid:G("supplyid")||1,shbd_monitor_ext:G("shbd_monitor_ext"),rsln:CONFIG.RSLN,sf:CONFIG.SWF,pgid:window.CONFIG?window.CONFIG.PAGEID:"",newschn:window.CONFIG?window.CONFIG.CHANNELID:"",r:(Math.random()+'').substring(2,15)}},param:function(_obj){var str="";for(var pro in _obj){str+="&"+pro+"="+_obj[pro]}return str.replace("&","?")},get_url:function(type,_obj){if(!CONFIG["URL_"+type+"_STAT"])return;if(!_obj)return;var args=this.build(_obj);args=this.param(args);return CONFIG["URL_"+type+"_STAT"][0]+args},ad_plus_pv:function(_obj){var adobj=_obj;var self=this;if(adobj.resource.imp){for(var i=0;i<adobj.resource.imp.length;i++){if((adobj.resource.imp[i].match(/imp/)||adobj.resource.imp[i].match(/clk/))&&adobj.resource.imp[i].indexOf("?")==-1){self.get(adobj.resource.imp[i]+'?apid='+adobj.cont_id+'&impid='+adobj.impression_id)}else if((adobj.resource.imp[i].match(/imp/)||adobj.resource.imp[i].match(/clk/))&&adobj.resource.imp[i].indexOf("?")!=-1){self.get(adobj.resource.imp[i]+'&apid='+adobj.cont_id+'&impid='+adobj.impression_id)}else{self.get(adobj.resource.imp[i])}}}else if(adobj.imp){for(var i=0;i<adobj.imp[i].length;i++){if((adobj.resource.imp[i].match(/imp/)||adobj.resource.imp[i].match(/clk/))&&adobj.resource.imp[i].indexOf("?")==-1){self.get(adobj.imp[i]+'?apid='+adobj.cont_id+'&impid='+adobj.impression_id)}else if((adobj.imp[i].match(/imp/)||adobj.resource.imp[i].match(/clk/))&&adobj.resource.imp[i].indexOf("?")!=-1){self.get(adobj.imp[i]+'&apid='+adobj.cont_id+'&impid='+adobj.impression_id)}else{self.get(adobj.resource.imp[i])}}}}};return stat});